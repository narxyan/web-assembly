<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cheerp WebAssembly Example</title>
</head>

<body>
    <h1>Cheerp WebAssembly Example</h1>

    <!-- Input fields for two numbers -->
    <label for="num1">Number 1: </label>
    <input type="number" id="num1" value="5">
    <br>
    <label for="num2">Number 2: </label>
    <input type="number" id="num2" value="10">
    <br><br>
    <button id="addBtn">Add Numbers</button>
    <p>Result: <span id="result">N/A</span></p>

    <!-- Include the Cheerp-generated JavaScript file -->
    <script src="hello.js"></script>

<script>
    window.addEventListener('load', () => {
        a7.promise.then(() => {
            // Add click event to the button
            document.getElementById('addBtn').addEventListener('click', () => {
                // Get the input values from the form
                const num1 = document.getElementById('num1').value;
                const num2 = document.getElementById('num2').value;

                // Prepare the argv array in JavaScript
                const argv = ["program", num1, num2];

                // Set argc and pass argv array
                const argc = argv.length;

                // Call the WebAssembly 'main' function with argc and argv (assuming __asm.main is available)
                __asm.main(argc, argv);  // Directly call main with the argument count and array

                // Debug: log the arguments
                console.log("Called main with args:", argv);
            });
        });
    });
</script>




</body>

</html>